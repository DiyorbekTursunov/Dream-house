document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".registerBtn"),t=document.getElementById("registrationModal"),n=document.getElementById("closeModalBtn"),l=document.querySelector(".homeModalOverlay"),o=document.getElementById("registrationForm"),i=document.getElementById("phone"),a=document.getElementById("phoneError"),c=document.getElementById("submitBtn"),d=document.getElementById("selectedCountry"),r=document.getElementById("selectedCountryCode"),s=document.getElementById("countryDropdown"),m=document.getElementById("dropdownIcon"),h=[{name:"Tajikistan",code:"+992"},{name:"Uzbekistan",code:"+998"},{name:"AQSH",code:"+1"},{name:"Janubiy Koreya",code:"+82"},{name:"Qirg'iziston",code:"+996"},{name:"Qozog'iston",code:"+7"},{name:"Turkmaniston",code:"+993"},{name:"Polsha",code:"+48"}],u={"+992":{placeholder:"55 555 5555",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{4}$/.test(e)}},"+998":{placeholder:"88 888 88 88",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(7,e.length))),e.length>7&&(t+=" "+e.slice(7,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{2} \d{2}$/.test(e)}},"+1":{placeholder:"555 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+82":{placeholder:"10 1234 5678",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{2} \d{4} \d{4}$/.test(e)}},"+996":{placeholder:"555 123 456",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(9,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{3}$/.test(e)}},"+7":{placeholder:"700 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+993":{placeholder:"6 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(1,e.length))),e.length>1&&(t+=" "+e.slice(1,Math.min(4,e.length))),e.length>4&&(t+=" "+e.slice(4,Math.min(8,e.length))),t},validate:function(e){return/^\d{1} \d{3} \d{4}$/.test(e)}},"+48":{placeholder:"123 456 789",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(9,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{3}$/.test(e)}}};let g="+998";function y(){t.style.display="none",document.body.style.overflowY="scroll"}d.addEventListener("click",(function(){"block"===s.style.display?(s.style.display="none",m.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'):(s.innerHTML="",h.forEach((function(e){const t=document.createElement("div");t.className="country-option",e.code===g&&t.classList.add("selected"),t.innerHTML=`\n          <span>${e.name}</span>\n          <span class="country-code">${e.code}</span>\n          ${e.code,""}\n        `,t.addEventListener("click",(function(){g=e.code,r.textContent=e.code,s.style.display="none";const t=u[e.code]||u["+998"];i.placeholder=t.placeholder,i.value="",a.style.display="none",m.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'})),s.appendChild(t)})),s.style.display="block",m.innerHTML='<polyline points="18 15 12 9 6 15"></polyline>')})),document.addEventListener("click",(function(e){d.contains(e.target)||s.contains(e.target)||(s.style.display="none",m.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>')})),i.addEventListener("input",(function(e){const t=e.target.value.replace(/\D/g,""),n=(u[g]||u["+998"]).format(t);i.value=n,a.style.display="none"})),e.forEach((function(e){e.addEventListener("click",(function(){t.style.display="block",document.body.style.overflowY="hidden"}))})),n.addEventListener("click",y),l.addEventListener("click",y),o.addEventListener("submit",(function(e){e.preventDefault();const t=i.value;if(!(u[g]||u["+998"]).validate(t))return void(a.style.display="block");a.style.display="none",c.textContent="YUBORILMOQDA...",c.disabled=!0;const n=new Date,l=n.toLocaleDateString("uz-UZ"),o=n.toLocaleTimeString("uz-UZ"),d={TelefonRaqam:g+" "+t,SanaSoat:l+" - "+o};localStorage.setItem("formData",JSON.stringify(d)),window.location.href="/thankYou.html",c.textContent="DAVOM ETISH",c.disabled=!1,i.value="",y()}));let f=120;const p=document.getElementById("timer");if(p){const e=setInterval((function(){if(f<=0)return clearInterval(e);f--;const t=Math.floor(f/60),n=f%60,l=t.toString().padStart(1,"0")+":"+n.toString().padStart(2,"0");p.textContent=l}),1e3)}})),document.addEventListener("DOMContentLoaded",(()=>{setTimeout((()=>{document.querySelectorAll(".minifyImg").forEach((e=>{const t=e.getAttribute("data-src");if(!t)return;const n=new Image;n.src=t,n.onload=()=>{e.src=t,e.classList.remove("blur-up")},n.onerror=()=>{console.warn("Rasm yuklanmadi:",t)}}))}),1e3)}));let timeLeft=120;const timerEl=document.getElementById("timer"),interval=setInterval((()=>{const e=Math.floor(timeLeft/60),t=timeLeft%60;timerEl.textContent=String(e).padStart(2,"0")+":"+String(t).padStart(2,"0"),timeLeft<=0&&clearInterval(interval),timeLeft--}),1e3);
